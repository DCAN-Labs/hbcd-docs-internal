---
config:
  layout: elk
  look: neo
  theme: redux
---
flowchart LR
 subgraph s2["<b>CBRAIN Processing</b><br><a href=../../orgcharts/#midb-informatics-hub-msi rel=noopener target=_blank>UMN MSI</a>"]
        n24["CBRAIN<br>Processing"]
        n25["<b>De-ID<br></b><i><code>S3:main-deid/<br>derivatives/</code></i>"]
        n26@{ label: "Record Query<br><a href='../data-proc-wf/#record-query' target=_blank><i>Click for Details</i></a>" }
  end
 subgraph s3["Re-Identification for LORIS<br>MSI"]
        n27["Re-ID"]
        n28@{ label: "<span style=\"color:\">Main PR S3</span><br style=\"color:\"><span style=\"color:\"><i>reid_brainswipes/<br>derivatives</i></span><i style=\"color:\">/</i>" }
        n43["LORIS<br>INGESTION"]
  end
 subgraph s4["BrainSwipes<br>MSI"]
        n32["QC &amp; tabulated data generation"]
        n33@{ label: "<div style=\"color:\"><div>De-ID S3<br></div><div></div></div><div style=\"color:\"><i style=\"background-color:\"><font style=\"font-size:\">brainswipes/</font></i></div>" }
  end
 subgraph s5["Release<br>MSI"]
        n35["Copy data<br>to pre-release bucket"]
        n36@{ label: "<a href=\"../../orgcharts/#lasso\" rel=\"noopener\" target=\"_blank\"><b>LASSO</a><br>INGESTION</b>" }
  end
 subgraph s6["<b>NOTE</b>"]
        legend@{ label: "<b>'S3:'</b> indicates<br>the prefix<span style=\"background-color:\"><br></span><span style=\"background-color:lightblue;\">s3://midb-hbcd-<br></span>for S3 bucket names" }
  end
    n24 --> n25
    n25 --> n26 & n27 & n35 & n32
    n26 --> n25
    n27 --> n28
    n32 --> n33
    n33 --> n27
    n35 --> n36
    n36 --> n40(("<b>LASSO<br>INGESTION</b>"))
    n28 --> n43
    n44["<b>CBRAIN<br>Processing<br><i>CONTINUED</i></b>"] --> s2
    n24@{ shape: rect}
    n25@{ shape: disk}
    n26@{ shape: rect}
    n27@{ shape: rect}
    n28@{ shape: disk}
    n33@{ shape: disk}
    n35@{ shape: rect}
    n36@{ shape: disk}
    n44@{ shape: rect}
    style n24 fill:#E1BEE7
    style n25 fill:#E1BEE7
    style n26 fill:#E1BEE7
    style n27 fill:#BBDEFB
    style n28 fill:#BBDEFB
    style n43 fill:#BBDEFB
    style n32 fill:#FFD600
    style n33 fill:#FFD600,color:#000000
    style n35 fill:#C8E6C9
    style n36 fill:#C8E6C9
    style n40 fill:#C8E6C9,stroke:#00C853,stroke-width:4px,stroke-dasharray: 0
    style n44 fill:#C8E6C9,stroke-width:4px,stroke-dasharray: 0,stroke:#00C853
    style s2 fill:#FAD9FF
    style s3 fill:#E3F2FD
    style s4 fill:#FFF9C4
    style s5 fill:#EBFFEB
